<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡πÅ‡∏ä‡∏£‡πå Flex ‚Äî ‡∏Å‡∏î‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô/‡∏Å‡∏•‡∏∏‡πà‡∏°</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    :root{--accent:#0b2b3a;--accent-2:#0f4a63;--card-bg:#061826}
    html,body{height:100%;margin:0;font-family:Inter, Roboto, "Noto Sans Thai", Arial, sans-serif;background:linear-gradient(180deg,var(--accent),#062635);color:#fff}
    .wrap{height:100%;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:720px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.08));border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);text-align:center}
    .preview{border-radius:12px;overflow:hidden;margin:0 auto 18px;max-width:520px}
    .preview img{display:block;width:100%;height:auto}
    h1{margin:0 0 10px;font-size:20px}
    p.lead{margin:0 0 18px;color:rgba(255,255,255,0.92)}
    .share-btn{display:inline-flex;align-items:center;gap:10px;padding:14px 22px;border-radius:12px;background:#ff6b00;color:#111;font-weight:700;border:none;cursor:pointer;font-size:16px}
    .note{margin-top:12px;font-size:13px;color:rgba(255,255,255,0.75)}
    footer{margin-top:18px;font-size:13px;color:rgba(255,255,255,0.6)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>‡πÅ‡∏ä‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô/‡∏Å‡∏•‡∏∏‡πà‡∏° (LINE)</h1>
      <div class="preview" id="preview">
        <img src="https://img5.pic.in.th/file/secure-sv1/image---2025-11-24T175814.427.png" alt="‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á">
      </div>
      <p class="lead">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏†‡∏≤‡∏û: <strong>üßß‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ô‡∏ü‡∏£‡∏µ100.-üßß</strong></p>

      <button id="shareBtn" class="share-btn">‡∏Å‡∏î‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô/‡∏Å‡∏•‡∏∏‡πà‡∏°</button>
      <p class="note">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î ‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ä‡∏£‡πå Flex Message ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ LINE</p>
      <footer>LIFF ID: <code>2008464608-74mjEPy4</code></footer>
    </div>
  </div>

  <script>
    // --- CONFIG ---
    const LIFF_ID = '2008464608-74mjEPy4';
    const IMAGE_URL = 'https://img5.pic.in.th/file/secure-sv1/image---2025-11-24T175814.427.png';
    const BUTTON_1_LABEL = 'üßß‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ô‡∏ü‡∏£‡∏µ100.-üßß';
    const BUTTON_1_URI = 'https://lin.ee/4lT7aqM';
    const BUTTON_2_LABEL = 'üé∞‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ôüé∞';
    const BUTTON_2_URI = 'https://winnerslot88.com';

    // --- Flex Message payload ---
    // The bubble uses a matching backgroundColor and white text to contrast with the image
    const flexBubble = {
      type: 'bubble',
      size: 'mega',
      direction: 'ltr',
      hero: {
        type: 'image',
        url: IMAGE_URL,
        size: 'full',
        aspectRatio: '4:3',
        aspectMode: 'cover'
      },
      body: {
        type: 'box',
        layout: 'vertical',
        spacing: 'md',
        backgroundColor: '#082536', // match with page theme
        contents: [
          {
            type: 'text',
            text: BUTTON_1_LABEL,
            weight: 'bold',
            size: 'lg',
            color: '#ffffff',
            align: 'center'
          },
          {
            type: 'text',
            text: '‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ô‡∏ü‡∏£‡∏µ ‡πÅ‡∏à‡∏Å‡∏à‡∏£‡∏¥‡∏á 100 ‡∏ö‡∏≤‡∏ó ‚Äî ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î',
            size: 'sm',
            wrap: true,
            color: '#e6f7ff',
            align: 'center',
            margin: 'md'
          }
        ]
      },
      footer: {
        type: 'box',
        layout: 'vertical',
        spacing: 'sm',
        backgroundColor: '#05202a',
        contents: [
          {
            type: 'button',
            style: 'primary',
            height: 'sm',
            action: { type: 'uri', label: BUTTON_1_LABEL, uri: BUTTON_1_URI }
          },
          {
            type: 'button',
            style: 'secondary',
            height: 'sm',
            action: { type: 'uri', label: BUTTON_2_LABEL, uri: BUTTON_2_URI }
          }
        ]
      }
    };

    async function initLiff() {
      try {
        await liff.init({ liffId: LIFF_ID });
        // Optional: show whether LIFF is ready
        // console.log('LIFF initialized', liff.isLoggedIn());
      } catch (err) {
        console.error('LIFF init failed', err);
      }
    }

    async function shareFlex() {
      // Message array with a single flex bubble
      const messages = [
        {
          type: 'flex',
          altText: '‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ô‡∏ü‡∏£‡∏µ 100.- ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡πà‡∏ô',
          contents: flexBubble
        }
      ];

      try {
        // If shareTargetPicker is available, open picker to choose friend/group
        if (liff.shareTargetPicker) {
          await liff.shareTargetPicker(messages);
          // no further action required ‚Äî the picker handles sharing
        } else if (liff.sendMessages) {
          // fallback: send directly (works only in chat context)
          await liff.sendMessages(messages);
          alert('‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏ä‡∏ó‡∏Ç‡∏≠‡∏á LINE)');
        } else {
          alert('‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏ä‡∏£‡πå‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô LIFF ‡∏ô‡∏µ‡πâ');
        }
      } catch (err) {
        console.error('‡πÅ‡∏ä‡∏£‡πå‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß', err);
        // if not logged in, try prompt login then retry
        if (!liff.isLoggedIn()) {
          if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö LINE ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
            liff.login();
          }
        } else {
          alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡πÅ‡∏ä‡∏£‡πå ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
        }
      }
    }

    // Initialize on load
    window.addEventListener('load', () => {
      initLiff();
      document.getElementById('shareBtn').addEventListener('click', shareFlex);
    });
  </script>
</body>
</html>
